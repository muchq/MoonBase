load("@crates//:defs.bzl", "all_crate_deps")
load("@rules_rust//rust:defs.bzl", "rust_binary")

rust_binary(
    name = "microgpt",
    srcs = [
        "src/infer.rs",
        "src/main.rs",
        "src/train.rs",
    ],
    crate_features = select({
        "//:is_mac": ["metal"],
        "//conditions:default": [],
    }),
    crate_name = "microgpt_cli",
    deps = [
        "//domains/ai/libs/microgpt",
    ] + all_crate_deps(),
)
